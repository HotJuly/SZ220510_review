<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /*
            异步是什么意思?
              将一件事情,放到未来去做,这就是异步(懒)
              将一段代码或者一个函数,延迟一段时间执行,这就是异步

            问题:什么是回调函数?
            回答:
              1.我们创建的
              2.没有调用
              3.但是他执行了

            问题:请问回调函数一定是异步执行吗?
            回答:不一定,有部分回调函数是同步执行的,例如Promise的执行器函数,数组相关的方法的回调函数

            异步任务
              一共分为2种,宏任务和微任务
              存储宏任务的队列叫做宏任务队列
              存储微任务的队列叫做微任务队列

            队列
              数据类型:数组
              特点:先进先出,后进后出

            栈
              数据类型:数组
              特点:先进后出,后进先出

              异步任务晚于主线程代码执行
                主线程代码没有执行结束之前,异步任务是不能执行的

              宏任务:
                1.定时器
                2.ajax
                3.事件相关

              微任务:
                1.then方法
                2.mutationObserver(HTML5的新特性)
                  用于监视DOM结构的变化,只要发生了变化,就会执行对应的回调函数

              以上这些都是用于开启异步任务的手段/方法

              问题:请问js中,是宏任务优先还是微任务优先?
                如果将script标签中的代码作为第一宏任务看待,那么就是宏任务优先
                如果不将script标签中的代码作为第一宏任务看待,那么就是微任务优先

            代码执行顺序:主线程代码->清空微任务队列->执行宏任务
              每两个宏任务之间,都会去查看一些微任务队列,如果有微任务就清空

          */
      // [1, 2, 3].forEach(item => {
      //   console.log(item)
      // })
      // console.log('a forEach()之后')

      // new Promise((resolve, reject) => { // excutor  执行器函数
      //   console.log('b 执行excutor')
      // })

      // console.log('c new Promise()之后')

      // setTimeout(() => {
      //   console.log("d 执行timout回调");
      // }, 0);

      // console.log("e setTimeout()之后");

      // Promise.resolve(1).then(() => {
      //   console.log("f promise成功的回调");
      // });

      // Promise.resolve(1).then(() => {
      //   console.log("g promise成功的回调");
      // });

      // console.log("h .then之后");

      //-------------------------------------------

      setTimeout(() => {
        console.log(1);

        Promise.resolve().then(() => {
          console.log(2);
        });

        Promise.resolve().then(() => {
          console.log(3);
        });

      },0);

      setTimeout(() => {
        console.log(4);
      }, 0);

      console.log(5);
    </script>
  </body>
</html>
